<ion-pane ng-controller="SessionsProfileController">
  <div class="bar bar-header bar-light">
    <a class="button icon ion-ios-arrow-left button-clear button-dark" href="#/overview"></a>
    <h1 class="title">{{'overview.my_profile'| translate}}</h1>
  </div>
  <ion-content class="has-header">
    <div class="row responsive-lg">
      <div class="col">
        <div class="ct-chart ct-minor-seventh" id="mainchart" ng-init="re_aggregate()"></div>
      </div>
      <div class="col">
        <ion-list>
          <div class="item item-divider item-icon-right" ng-click="is_mr20_open = !is_mr20_open">
            <i class="icon ion-chevron-up" ng-show="is_mr20_open"></i>
            <i class="icon ion-chevron-down" ng-hide="is_mr20_open"></i>
            {{'questionary.mrs20.group_title' | translate}}
          </div>
          <ion-checkbox ng-model="display.mrs20_e" ng-change="re_aggregate()" ng-show="is_mr20_open">
            <svg width="100" height="10">
              <g class="ct-series mrs20_e">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.mrs20.extraversion' | translate}}
          </ion-checkbox>
          <ion-checkbox ng-model="display.mrs20_n" ng-change="re_aggregate()" ng-show="is_mr20_open">
            <svg width="100" height="10">
              <g class="ct-series mrs20_n">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.mrs20.neuroticism' | translate}}
          </ion-checkbox>
          <ion-checkbox ng-model="display.mrs20_v" ng-change="re_aggregate()" ng-show="is_mr20_open">
            <svg width="100" height="10">
              <g class="ct-series mrs20_v">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.mrs20.agreeableness' | translate}}
          </ion-checkbox>
          <ion-checkbox ng-model="display.mrs20_g" ng-change="re_aggregate()" ng-show="is_mr20_open">
            <svg width="100" height="10">
              <g class="ct-series mrs20_g">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.mrs20.conscience' | translate}}
          </ion-checkbox>
          <ion-checkbox ng-model="display.mrs20_k" ng-change="re_aggregate()" ng-show="is_mr20_open">
            <svg width="100" height="10">
              <g class="ct-series mrs20_k">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.mrs20.openness' | translate}}
          </ion-checkbox>
          
          <div class="item item-divider item-icon-right"  ng-click="is_panava_open = !is_panava_open">
            <i class="icon ion-chevron-up" ng-show="is_panava_open"></i>
            <i class="icon ion-chevron-down" ng-hide="is_panava_open"></i>
           {{'questionary.panava.group_title' | translate}}
          </div>
          <ion-checkbox ng-model="display.panava_pa" ng-change="re_aggregate()" ng-show="is_panava_open">
            <svg width="100" height="10">
              <g class="ct-series panava_pa">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.panava.positive_affect' | translate}}
          </ion-checkbox>
          <ion-checkbox ng-model="display.panava_na" ng-change="re_aggregate()" ng-show="is_panava_open">
            <svg width="100" height="10">
              <g class="ct-series panava_na">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.panava.negative_affect' | translate}}
          </ion-checkbox>
          <ion-checkbox ng-model="display.panava_va" ng-change="re_aggregate()" ng-show="is_panava_open">
            <svg width="100" height="10">
              <g class="ct-series panava_va">
                <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
              </g>
            </svg>
            {{'questionary.panava.valence' | translate}}
          </ion-checkbox>
          
          <div class="item item-divider item-icon-right" ng-show="custom_field_dimensions.length > 0"  ng-click="is_custom_field_open = !is_custom_field_open">
            <i class="icon ion-chevron-up" ng-show="is_custom_field_open"></i>
            <i class="icon ion-chevron-down" ng-hide="is_custom_field_open"></i>
           {{'overview.custom_fields' | translate}}
          </div>
          <div ng-repeat="field in custom_field_dimensions" ng-show="is_custom_field_open">
            <ion-checkbox ng-model="display[field]" ng-change="re_aggregate()">
              <svg width="100" height="10">
                <g class="ct-series col{{$index}}">
                  <line x1="0" y1="5" x2="100" y2="5" class="ct-line"/>
                </g>
              </svg>
              {{field}}
            </ion-checkbox>
          </div>
          
          <div class="item item-divider item-icon-right" ng-click="is_filter_open = !is_filter_open">
            <i class="icon ion-chevron-up" ng-show="is_filter_open"></i>
            <i class="icon ion-chevron-down" ng-hide="is_filter_open"></i>
            {{'questionary.filter.group_title' | translate}}
          </div>
          <div class="item" ng-show="is_filter_open">
            <div class="rangeslider">
              <div ya-no-ui-slider='limit_slider_options' ya-no-ui-slider-events="limit_slider_event"></div>
            </div>
          </div>
          <ion-item ng-repeat="session in display_sessions" class="item item-thumbnail-left" id="session_{{session.local_id}}" ng-click="viewSession(session)">
            <img ng-src="{{session.image ? session.image : 'img/dummy_image.svg'}}"/> 
            <h2>{{'format.datetime.short'|translate:{date: toDate(session.started_at)} }}</h2>
            <p>{{'sessions.situations.' + session.situation | translate}}</p>
            <p>{{session.description}}</p>
          </ion-item>
        </ion-list>
        <ion-infinite-scroll on-infinite="load_more()"></ion-infinite-scroll>
      </div>
    </div>
  </ion-content>
</ion-pane>
